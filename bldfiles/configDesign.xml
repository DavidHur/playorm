<design>

<!-- Use this tool to create your package design which the build will compare with the
     actual package dependencies.  It will then tell you what parts of the code violate
	 the following package design.

	 See the documentation of the ant-contrib project to fill in the package design here
     ant-contrib is at http://sourceforge.net/projects/ant-contrib.  Currently, this
	 template is using a version from the CVS head, and the docs are up to date on the
	 CVS head, but not in the latest download yet as I have not asked for a new release
	 on ant-contrib yet(wanted to finish a few more things), but this is stable and works.
	 I just want to add one more feature-->

<!-- external packages that are global and everyone is allowed to depend on -->
<package name="slf4j" package="org.slf4j" needdeclarations="false"/>
<package name="inject" package="javax.inject" needdeclarations="false"/>

<!-- external packages we limit the use of so we can isolate to just one or two packages that depend on this technology -->
<package name="lucene" package="org.apache.lucene" subpackages="include"/>
<package name="antlr" package="org.antlr.runtime" subpackages="include"/>
<package name="annotationParser" package="com.impetus.annovention" subpackages="include"/>
<package name="javassist" package="javassist.util.proxy"/>

<package name="metaDbos" package="com.alvazan.orm.impl.meta.query"/>

<package name="RawIndexSpi" package="com.alvazan.orm.api.spi.index">
	<depends>metaDbos</depends>
	<depends>lucene</depends>
</package> 
<package name="RawNoSqlSpi" package="com.alvazan.orm.api.spi.db"/>
<package name="NoSqlApi" package="com.alvazan.orm.api.spi.layer2">
	<depends>RawNoSqlSpi</depends>
	<depends>RawIndexSpi</depends>
</package>
<package name="api" package="com.alvazan.orm.api.base" subpackages="include">
	<depends>NoSqlApi</depends>
</package>

<package name="allapis" package="com.alvazan.orm.api" subpackages="include"/>

<package name="ourParser" package="com.alvazan.orm.parser.antlr">
	<depends>antlr</depends>
</package>

<!-- bindings can depend on everything to wire stuff up so needdepends is false -->
<package name="bindings" package="com.alvazan.orm.impl.bindings" needdepends="false"/>



<package name="metadata" package="com.alvazan.orm.impl.meta.data">
	<depends>allapis</depends>
	<depends>javassist</depends>
	<depends>metaDbos</depends>
</package>

<package name="metascan" package="com.alvazan.orm.impl.meta.scan">
    <depends>metadata</depends>
    <depends>metaDbos</depends>
	<depends>allapis</depends>
	<depends>antlr</depends>
	<depends>ourParser</depends>
	<depends>javassist</depends>
</package>

<package name="base" package="com.alvazan.orm.layer1.base">
	<depends>allapis</depends>
	<depends>metascan</depends>
	<depends>metadata</depends>
	<depends>metaDbos</depends>
	<depends>annotationParser</depends>
</package>

<package name="cache" package="com.alvazan.orm.layer2.nosql.cache">
	<depends>NoSqlApi</depends>
	<depends>RawNoSqlSpi</depends>
	<depends>RawIndexSpi</depends>
</package>

<!-- This section is just the database adapters depending on the spi -->
<package name="cass" package="com.alvazan.orm.layer3.spi.db.cassandra">
	<depends>RawNoSqlSpi</depends>
</package>
<package name="hadoop" package="com.alvazan.orm.layer3.spi.db.hadoop">
	<depends>RawNoSqlSpi</depends>
</package>
<package name="inMemDb"    package="com.alvazan.orm.layer3.spi.db.inmemory">
	<depends>RawNoSqlSpi</depends>

</package>

<!-- This section is just the index adapters depending on the spi -->
<package name="solr"       package="com.alvazan.orm.layer3.spi.index.solr">
	<depends>RawIndexSpi</depends>
</package>
<package name="inMemIndex" package="com.alvazan.orm.layer3.spi.index.inmemory">
	<depends>RawIndexSpi</depends>
	<depends>lucene</depends>
	<depends>metaDbos</depends>
</package>

<package name="test" package="com.alvazan.test" subpackages="include" needdepends="false"/>

</design>
